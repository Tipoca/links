fun pass_it_on(pid) {
  pid ! recv()
}

fun create_processes(n, prevpid) {
  if (n == 0) spawn { pass_it_on(prevpid) }
  else {
   if (mod(n)(1000) == 0) print(".") else ();
   var thispid = spawn { pass_it_on(prevpid) };
   create_processes(n - 1, thispid)
  }
}

{
  last_pid = create_processes(200000, self());
  last_pid ! Message;
  recv();
  "the end!"
}
